<h1 class="l-space-bottom">Dashboard</h1>

<h3>Retos Activos</h3>
<% if @challenges.any? %>
  <table id="challenges" class="table table-striped table-vertically-centered">
    <thead>
      <tr>
        <th></th>
        <th>Participantes</th>
        <th>Propuestas recibidas</th>
      </tr>
    </thead>
    <tbody>
      <% @challenges.each do |challenge| %>
        <tr>
          <td><%= link_to challenge.title, challenge_path(challenge), target: '_blank' %></td>
          <td><%= challenge.collaborators.size %></td>
          <td><%= challenge.entries.size %></td>
        </tr>
      <% end %>
    </tbody>
  </table>
<% else %>
  <div class="alert alert-info">
    No hay retos activos.
  </div>
<% end %>

<h3 class="l-space-top-large">Ultimas propuestas recibidas</h3>
<% if @entries.any? %>
<table id="entries" class="table table-striped table-vertically-centered">
  <thead>
    <tr>
      <th></th>
      <th>Empresa</th>
      <th>Link al proyecto</th>
      <th>Reto</th>
    </tr>
  </thead>
  <tbody>
    <% @entries.each do |entry| %>
      <tr>
        <td>
          <%= link_to entry.name, dashboard_entry_path(entry) %>
          <%= render 'entry_status', entry: entry %>
          <br/>
          <small>Fecha envío: <%= l(entry.created_at, format: :short)%></small>
        </td>
        <td><%= entry.member.name %></td>
        <td><%= link_to truncate(entry.live_demo_url), entry.live_demo_url, target: '_blank' %></td>
        <td><%= entry.challenge.title %></td>
      </tr>
    <% end %>
  </tbody>
</table>
<% else %>
  <div class="alert alert-info">
    Aún no hay propuestas.
  </div>
<% end %>
