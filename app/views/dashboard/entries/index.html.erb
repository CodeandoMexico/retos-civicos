<h1 class="l-space-bottom">Propuestas</h1>

<%= link_to 'Exportar CSV',
  dashboard_entries_path(challenge_id: @current_challenge.id, format: :csv),
  class: 'btn btn-default pull-right' %>

<%= render 'challenges_filter',
  challenges: @challenges,
  current_challenge: @current_challenge,
  filter_path: ->(challenge) { dashboard_entries_path(challenge_id: challenge.id) } %>

<% if @entries.any? %>
  <table id="entries" class="table table-striped table-vertically-centered">
    <thead>
      <tr>
        <th></th>
        <th>Empresa</th>
        <th>Link al proyecto</th>
        <th>Tecnologías</th>
        <th>¿Pública?</th>
      </tr>
    </thead>
    <tbody>
      <%= content_tag_for :tr, @entries do |entry| %>
        <td>
          <%= link_to entry.name, dashboard_entry_path(entry) %>
          <%= render 'entry_status', entry: entry %>
          <br/>
          <small>Fecha envío: <%= l(entry.created_at, format: :short)%></small>
        </td>
        <td><%= entry.member.company_name %></td>
        <td><%= link_to truncate(entry.idea_url), entry.idea_url, target: '_blank' %></td>
        <td><%= entry.technologies_separated_by_commas %></td>
        <td><%= render 'visit_or_publish_entry', entry: entry %></td>
      <% end %>
    </tbody>
  </table>
<% else %>
  <div class="alert alert-info">
    Aún no hay propuestas para este reto.
  </div>
<% end %>
