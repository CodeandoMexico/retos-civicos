.challenge.heading
  %h1= @challenge.title
  %p= @challenge.pitch

.challenge.details
  = image_tag 'placeholder.jpg'
  %p
    Creado por: @challenge.organization |
    -# Patrocinado por: Banco Mundial

  .row
    .col-xs-12.col-sm-3
      %span.glyphicon.glyphicon-user{ "aria-hidden"=> "true" }
      %span
        = @challenge.collaborators.count
        Participantes

    .col-xs-12.col-sm-3
      %span.glyphicon.glyphicon-user{ "aria-hidden"=> "true" }
      %span
        = @challenge.entries.count
        Propuestas

    .col-xs-12.col-sm-3
      %span.glyphicon.glyphicon-user{ "aria-hidden"=> "true" }
      %span
        Premio
        = @challenge.prize

    .col-xs-12.col-sm-3
      %span.glyphicon.glyphicon-user{ "aria-hidden"=> "true" }
      %span
        = Phases.days_left_for_current_phase(@challenge)
        días para concluir etapa de ideas

.challenge.action.text-center
  - if user_is_able_to_collaborate? @challenge
    - if can_edit_challenge? @challenge
      .challenge-collaborate-content
        = link_to t('.edit-challenge'), edit_dashboard_challenge_path(@challenge), class: 'btn btn-default'
    - elsif Phases.is_current?(:ideas, @challenge)
      .challenge-collaborate-content
        = collaborate_section(@challenge)
    - elsif Phases.is_current?(:ideas_selection, @challenge) && !can_edit_challenge?(@challenge)
      .challenge-collaborate-banner
        %h3{ style: "color:white;" }= t('.total-number-of-entries', count: @challenge.entries.count)
    - elsif Phases.is_current?(:prototypes, @challenge) && current_member && current_member.is_able_to_submit_a_prototype?(@challenge)
      - if current_member.has_submitted_prototype_for_challenge?(@challenge)
        .challenge-collaborate-content
          = link_to t('.edit-prototype'), edit_challenge_prototype_path(@challenge), class: 'btn btn-default'
      - else
        .challenge-collaborate-content
          = link_to t('.send-prototype'), new_challenge_prototype_path(@challenge), class: 'btn btn-default'


.challenge.timeline
  .phases-bar.phases-bar.js-phases-bar
    .phases-bar-milestone
      .phases-arrow
        .phases-arrow-dot
        .phases-arrow-line
      .phases-date.phases-date-milestone
        %dl
          %dt= @timeline.start.title
          %dd= @timeline.start.date
    .phases-bar-phase
      .phases-bar-completeness{ "data-size"=> "#{@timeline.ideas.completeness}" }
      %p= @timeline.ideas.title
      .phases-arrow.phases-arrow-end
        .phases-arrow-dot
        .phases-arrow-line
      .phases-date.phases-date-phase
        %dl
          %dt= @timeline.ideas.due_date_title
          %dd= @timeline.ideas.due_date
    .phases-bar-phase
      .phases-bar-completeness{ "data-size"=>"#{@timeline.ideas_selection.completeness}" }
      %p= @timeline.ideas_selection.title
    .phases-bar-milestone
      .phases-arrow
        .phases-arrow-dot
        .phases-arrow-line
      .phases-date.phases-date-milestone
        %dl
          %dt= @timeline.ideas_selection.due_date_title
          %dd= @timeline.ideas_selection.due_date
    .phases-bar-phase
      .phases-bar-completeness{ "data-size"=> "#{@timeline.prototypes.completeness}" }
      %p= @timeline.prototypes.title
      .phases-arrow.phases-arrow-end
        .phases-arrow-dot
        .phases-arrow-line
      .phases-date.phases-date-phase
        %dl
          %dt= @timeline.prototypes.due_date_title
          %dd= @timeline.prototypes.due_date
    .phases-bar-phase
      .phases-bar-completeness{ "data-size"=> "#{@timeline.prototypes_selection.completeness}" }
      %p= @timeline.prototypes_selection.title
    .phases-bar-milestone
      .phases-arrow
        .phases-arrow-dot
        .phases-arrow-line
      .phases-date.phases-date-last-milestone
        %dl
          %dt= @timeline.prototypes_selection.due_date_title
          %dd= @timeline.prototypes_selection.due_date
  - if @challenge.has_finished? && !@challenge.has_a_winner?
    .row
      .col-xs-12
        .alert.alert-warning
          %p.disclaimer= t('.disclaimer', organization_name: @organization.name)

.challenge.description
  %h3 Objetivos del reto
  %p= markdown_for_additional_links @challenge.description

- if @challenge.specs?
  .challenge.specs
    %h5 Puntos clave:
    %ul
      - if @challenge.first_spec.present?
        %li= markdown @challenge.first_spec

      - if @challenge.second_spec.present?
        %li= markdown @challenge.second_spec

      - if @challenge.third_spec.present?
        %li= markdown @challenge.third_spec

      - if @challenge.fourth_spec.present?
        %li= markdown @challenge.fourth_spec

      - if @challenge.fifth_spec.present?
        %li= markdown @challenge.fifth_spec


.challenge.datasets
  = render 'datasets', challenge: @challenge, datasets: @datasets

-# .challenge.jury
  -# %h3 Criterios y comité de evaluación
  -# %p= markdown_for_additional_links @challenge.description

.challenge.comments
  %h3 Conversación
  = render 'comments', challenge: @challenge

-# .challenge.newsletter
  = render 'newsletter', challenge: @challenge
